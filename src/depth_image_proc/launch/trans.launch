<launch>  

  <arg name="manager" />
  <arg name="points_xyz" default="true" />
  <arg name="rectify" default="true" />

  <arg name="respawn" default="false" />
  <arg     if="$(arg respawn)" name="bond" value="" />
  <arg unless="$(arg respawn)" name="bond" value="--no-bond" />

  <node pkg="nodelet" type="nodelet" name="metric_rect"
        args="load depth_image_proc/convert_metric $(arg manager) $(arg bond)"
	respawn="$(arg respawn)">
    <remap from="/camera/aligned_depth_to_infrared1/image_raw" to="image_rect_raw" />
    <remap from="image"     to="/camera/aligned_depth_to_infrared1/image_rect" />
  </node>

  <node if="$(arg points_xyz)"
	pkg="nodelet" type="nodelet" name="points"
        args="load depth_image_proc/point_cloud_xyz $(arg manager) $(arg bond)"
	respawn="$(arg respawn)">
    <remap from="camera/aligned_depth_to_infrared1/image_rect" to="image_rect_raw"/>
    <remap from="points" to="camera/aligned_depth_to_infrared1/points"/> 
 
<!-- Use raw image for efficiency -->
</node>
                
</launch>  
